<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<script src="http://code.jquery.com/jquery.min.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
	<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>

	<meta charset="UTF-8">
	<title>DinoDex Map</title>
	<style>
		h1{
			font-family:"Comic Sans MS", cursive, sans-serif;
			text-align: center;
		}

		#nav{
			font-family: "Comic Sans MS", cursive, sans-serif;
		}

		#mapid{
			display: block;
			margin: 0 auto;
			width: 800px; 
			height: 800px;
			display: none;
		}
		
		#game{
			display: none;
		}
		body, html{
			font-family: Verdana, Arial, Helvetica, sans-serif;
			
			margin: 0; padding: 0; border: 0;
		}
		
		#game2{
			display:none;
		}
		#game_table {
			margin: 1px auto;
		}

		#game_table div {
			border: 5px solid #07c;
			width: 300px;
			height: 300px;
			cursor: pointer;
		}

		#game_table div:hover {
			background-color: #ddd;
		}

		#settings{
			text-align: center;
		}
		#CURRENTDINOID{
			display: none;
		}

		.showingCard{
			background-color: #ccc;
		}
		.createaccount{
		}
		.loginer{
		}
		.loginstatus{
		}
		.mapinstructions{
			display: none;
		}
		.profile{
			display: none;
		}
		.leaderboard{
			display:none;
		}

		.pairFound{
			background-color: #ff0;
		}
		#timer, #num_clicks {
			font-weight: bold;
		}
	</style>
	

</head>
<body>

<script>
function leaderboards(){
	$("#mapid").hide();
	$(".loginer").hide();
	$(".createaccount").hide();
	$(".mapinstructions").hide();
	
	var currentUser = loginstatus.innerHTML;
	var spellArray
	var memArray
	var whackArray
	var templeArray
	
	
	    $.getJSON("/usersinfo", function(data, status){
        //alert(data[1].userid + data[1].password);
		//alert(data[0].userid +"  "+data[0].userpassword )
		for(var i = 0; i<data.length; i++){
			var user=data[i].userid;
			var spell=data[i].spellScore;
			var mem=data[i].memScore;
			var whack=data[i].whackScore;
			var temple=data[i].templeScore;
			spellArray.push(user,spell);
			memArray.push(user,mem);
			whackArray.push(user,whack);
			templeArray.push(user,temple);	
		}
		
		
		//LEFT OFF HERE Sort yay
		
		
		
			
			

    });
}
</script>

	<div class="jumbotron">
		<h1>DinoDex</h1>
		<p align="right" style="hidden" class="loginstatus" id="loginstatus">Please Login</p>
	</div>
	<nav class="navbar navbar-default">
		<div id="nav" class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">DinoDex</a>
			</div>
			<ul class="nav navbar-nav">
				<li class="active"><a href="#">Home</a></li>
				<li><a href="about.html">About</a></li>
				<li><a href="dinosaurs.html">Dinosaurs</a></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="localhost:3000" onclick="leaderboards()"><span class="glyphicon glyphicon-user"></span>Leaderboards</a></li>
				<li><a href="localhost:3000"><span class="glyphicon glyphicon-user"></span>View Profile</a></li>
				<li><a href="Start_Menu.html"><span class="glyphicon glyphicon-remove"></span>Sign Out</a></li>
		</div>
				
	</nav>
	
	<div align ="right">
	<button align ="right" onclick="showProfile()">Profile</button>
	</div>
	<script>
	
	
function showProfile(){

			var currUser = document.getElementById("loginstatus").innerHTML;
			var dinoArray;
			//alert(currUser)
			
    $.getJSON("/usersinfo", function(data, status){
        //alert(data[1].userid + data[1].password);
		//alert(data[0].userid +"  "+data[0].userpassword )
		if(currUser != "Please Login"){
			for(var i = 0; i<data.length; i++){
				if(data[i].userid == currUser){
					dinoArray = data[i].trophies;
				}
			}
		}
		else alert('Please login first!')
		
		$.getJSON("/dinosinfo", function(data, status){
		
			for(var i = 0; i < dinoArray; i++){
				var tempString = dinoArray[i];
				
				tempString.innerHTML = ;
				//FINISHUP
				
			}
		}

    });
}
</script>


<div class = "loginer" style="hidden">
<p>Login</p>
<form action="/login" method="POST" style = "hidden">
<input type="text" placeholder="userid" name="userid" id="usid">
<input type="text" placeholder="password" name="password" id="uspwd">
<button type ="submit" onclick="logging()">Login</button>
</form>
</div>

<div class = "createaccount" style="hidden">
<p>Or register a new account.</p>
<form action="/signup" method="POST">
<input type="text" placeholder="userid" name="userid">
<input type="text" placeholder="password2" name="password1">
<input type="text" placeholder="re-type password" name="password2">
<button type ="submit" >Create Account</button>
</form>
</div>


<div class = "leaderboard" style="hidden">
<ul id = "spellHi">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>

<ul id = "memHi">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>

<ul id = "whackHi">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>

<ul id = "templeHi">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>

</div>





<script>
function logging(){
	var id = document.getElementById("usid").value
	var pass = document.getElementById("uspwd").value
	var checkBool
    $.getJSON("/usersinfo", function(data, status){
        //alert(data[1].userid + data[1].password);
		//alert(data[0].userid +"  "+data[0].userpassword )
		for(var i = 0; i<data.length; i++){
			if(data[i].userid == id && data[i].userpassword == pass){
				checkBool = true
				break
			}
			checkBool = false
		}
		if (checkBool == true){
				$(".loginer").hide();
				$(".createaccount").hide();
				$(".mapinstructions").show();
				$("#mapid").show();
				loginstatus.innerHTML = id;
				alert("Successful Login");}
		else{
			alert("nope")}

    });
}
</script>

<p class = "mapinstructions" style="hidden">Go find DinoLocations on the Map</p>
	
<!-- Map creation -->
	<div id="mapid" class="mapclass" style="hidden"></div>



<%
	<!-- var mymap=L.map('mapid').setView([26.305892349824866,-98.17293477943724],13); -->
	coords=new Array();
	id_name=new Array();
	din=dinos;
	console.log(dinos);
	var ids;
	var name;
	 for(var i=0; i<dinos.length; i++) {
			ids=dinos[i].idn;
			name=dinos[i].name;
			id_name.push(ids,name);
			<!-- var n=id_name[0]; -->
			<!-- var d=id_name[1]; -->
			<!-- console.log(n); -->
			<!-- console.log(d); -->
		 for(var x=0;x<dinos[i].coord.length;x++){
			coor=dinos[i].coord[x];
			coords.push(coor);
			<!-- lat=coor[0]; -->
			<!-- log=coor[1]; -->
			<!-- console.log(lat); -->
			<!-- console.log(log); -->
			<!-- var marker2=L.marker([lat,log]).addTo(mymap); -->
		 }
     
	}	
%>

<!-- <script src="marker_class.js"> -->


</script>


<script src="/memgame/memogame.js"></script>

<script>


	

	var imgs = [ [ "http://efdreams.com/data_images/dreams/dinosaur/dinosaur-11.jpg","Triceratops"],
				 ["http://orig03.deviantart.net/f652/f/2014/331/5/7/jurassic_world__tyrannosaurus_rex_by_sonichedgehog2-d87wp3n.png","Tyranosaurus Rex"],
				 ["http://kindersay.com/files/images/dinosaur.png","Brontosaurus"]
				 
			   ]
	var coords=new Array();
	var mymap=L.map('mapid').setView([26.305892349824866,-98.17293477943724],13);


	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
		'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
		'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);

	var test= <%-JSON.stringify(coords)%>;
	var dino_db=<%-JSON.stringify(din)%>;
	var marker_arr=new Array();
	var marker_arr2=new Array();
	
	console.log("test: "+dino_db[0].idn);
	console.log("test: "+test);
	console.log(test.length);
	var name;
	for(var i=0;i<dino_db.length;i++){
		for(var x=0;x<dino_db[i].coord.length;x++){
			var cord=dino_db[i].coord[x];
			marker=L.marker([cord[0],cord[1]]).addTo(mymap).on('click', onClick);
			marker.bindPopup(dino_db[i].name+ "<br><a target='_blank' href='random.html'>Access this Dinosaur now!!</a>");
			marker.openPopup();
			marker_arr.push(dino_db[i].idn,marker);
		}
	}

 	var lats=test[1][0];
	var lon=test[1][1];
	var marker3=L.marker([lats,lon]).addTo(mymap);
	marker3.openPopup();
	
	function onClick(e) {
			x=this.getLatLng();
			var game=false;
			lat=x.lat;
			lng=x.lng;
			for(var i=0;i<dino_db.length;i++){
				for(var x=0; x<dino_db[i].coord.length;x++){
					lat1=dino_db[i].coord[x][0];
					lng2=dino_db[i].coord[x][1];
					if(lat1==lat && lng2==lng){
						console.log("we found it!! Take that bitch!");
						marker_arr2.push(dino_db[i].idn, dino_db[i].name, game);
						var CURRENTDINO = dino_db[i].idn;
						document.getElementById("CURRENTDINOID").innerHTML=CURRENTDINO;
					}
				}
				
			}
			
			console.log(x);
		}
	
</script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="Spelling_Game/Spell_Game.js"></script>
<p id="CURRENTDINOID" style="hidden">NULL</p>

</body>
</html>