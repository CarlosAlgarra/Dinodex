<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<script src="http://code.jquery.com/jquery.min.js"></script>
	
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
	<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>
	<!-- <link rel="stylesheet" type="text/css" href="Main_Map.css" /> -->
	<!-- <link rel="stylesheet" type="text/css" href="/public/Main_Map.css" /> -->
	<meta charset="UTF-8">
	<title>DinoDex Map</title>
	<style>
		h1{
			font-family:"Comic Sans MS", cursive, sans-serif;
			text-align: center;
		}

		#nav{
			font-family: "Comic Sans MS", cursive, sans-serif;
		}

		#mapid{
			display: block;
			margin: 0 auto;
		}
		
		#game{
			display: none;
		}
		body, html{
			font-family: Verdana, Arial, Helvetica, sans-serif;
			
			margin: 0; padding: 0; border: 0;
		}
		
		#game2{
			display:none;
		}
		#game_table {
			margin: 1px auto;
		}

		#game_table div {
			border: 5px solid #07c;
			width: 300px;
			height: 300px;
			cursor: pointer;
		}

		#game_table div:hover {
			background-color: #ddd;
		}

		#settings{
			text-align: center;
		}

		.showingCard{
			background-color: #ccc;
		}
		.createaccount{
			display: none;
		}
		.mapclasss{
			display: none;
		}

		.pairFound{
			background-color: #ff0;
		}
		#timer, #num_clicks {
			font-weight: bold;
		}
	</style>
</head>
<body>
	<div class="jumbotron">
		<h1>DinoDex</h1>
	</div>
	<nav class="navbar navbar-default">
		<div id="nav" class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">DinoDex</a>
			</div>
			<ul class="nav navbar-nav">
				<li class="active"><a href="#">Home</a></li>
				<li><a href="about.html">About</a></li>
				<li><a href="dinosaurs.html">Dinosaurs</a></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="localhost:3000"><span class="glyphicon glyphicon-user"></span>View Profile</a></li>
				<li><a href="Start_Menu.html"><span class="glyphicon glyphicon-remove"></span>Sign Out</a></li>
		</div>
				
	</nav>
	
<!-- 	Game #1 Spelling Game -->
	<div class="form-group" style="hidden" id="game">
		<img id="dino" src="" height="500" width="500">
		<p >You have 5 seconds to type this: <span id="dinotext"><p>
		<input type="text" class="form-control" id="answer" >
	</div>
<!-- 	Game #2 Memory Game -->
	<div id="game2" style="hidden">
		<center>
			<tr> Sample memory game</tr>
		</center>
		<center>
			<table id="game_table">
				<tbody>
					<tr><td align="center">JS is not enabled.</td></tr>
				</tbody>
			</table>
		</center>
	</div>
	
	
<!-- Map creation -->
	<div id="mapid" class="mapclass" style="width: 800px; height: 800px; hidden"></div>



<!-- <script src="map2.js"> -->


</script>



<!-- dummy register and login -->
<div>
<form action="/update" method="POST">
<input type="text" placeholder="userid" name="userid">
<input type="text" placeholder="trophy" name="trophy">
<button type ="submit">SUBMIT</button>
</form>
</div>

<div class = "createaccount" style="hidden">
<form action="/signup" method="POST">
<input type="text" placeholder="userid" name="userid">
<input type="text" placeholder="password" name="password">
<input type="text" placeholder="re-type password" name="password2">
<button type ="submit">CREATE</button>

</form>
</div>


<form action="/login" method="POST">
<input type="text" placeholder="userid" name="userid">
<input type="text" placeholder="password" name="password">
<button type ="submit">login</button>
</form>
</div>






<script>
<!-- ASSIGN NEW HI SCORE TO CURRENT USER -->

</script>


<button onclick="updateScoreFunction()">Click me</button>
<script>
function updateScoreFunction(){
	$(".createaccount").show();


}
</script>
<script>
<!-- ASSIGN NEW HI SCORE TO CURRENT USER -->
function updateScoreFunction2(){
$.post('/updateScore',
		{
		newScore: '10000'
		});
		
		
		console.log('this happenes')
}
</script>
<button onclick="updateScoreFunction2()">100000</button>


<%
console.log(dinos.length);
%>
<table id="topscores" style="width:100%">
</table>

<%
	<!-- var mymap=L.map('mapid').setView([26.305892349824866,-98.17293477943724],13); -->
	coords=new Array();
	id_name=new Array();
	din=dinos;
	console.log(dinos);
	var ids;
	var name;
	 for(var i=0; i<dinos.length; i++) {
			ids=dinos[i].idn;
			name=dinos[i].name;
			id_name.push(ids,name);
			<!-- var n=id_name[0]; -->
			<!-- var d=id_name[1]; -->
			<!-- console.log(n); -->
			<!-- console.log(d); -->
		 for(var x=0;x<dinos[i].coord.length;x++){
			coor=dinos[i].coord[x];
			coords.push(coor);
			<!-- lat=coor[0]; -->
			<!-- log=coor[1]; -->
			<!-- console.log(lat); -->
			<!-- console.log(log); -->
			<!-- var marker2=L.marker([lat,log]).addTo(mymap); -->
		 }
     
	}	
%>

<script src="marker_class.js">


</script>


<script src="/memgame/memogame.js"></script>

<script>


	

	var imgs = [ [ "http://efdreams.com/data_images/dreams/dinosaur/dinosaur-11.jpg","Triceratops"],
				 ["http://orig03.deviantart.net/f652/f/2014/331/5/7/jurassic_world__tyrannosaurus_rex_by_sonichedgehog2-d87wp3n.png","Tyranosaurus Rex"],
				 ["http://kindersay.com/files/images/dinosaur.png","Brontosaurus"]
				 
			   ]
	var coords=new Array();
	var mymap=L.map('mapid').setView([26.305892349824866,-98.17293477943724],13);


	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
		'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
		'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);

	var test= <%-JSON.stringify(coords)%>;
	var dino_db=<%-JSON.stringify(din)%>;
	var marker_arr=new Array();
	console.log("test: "+dino_db[0].idn);
	console.log("test: "+test);
	console.log(test.length);
	var name;
	for(var i=0;i<dino_db.length;i++){
		for(var x=0;x<dino_db[i].coord.length;x++){
			var cord=dino_db[i].coord[x];
			marker=L.marker([cord[0],cord[1]]).addTo(mymap);
			marker.bindPopup(dino_db[i].name+ "<br><a href='random.html'>Access this Dinosaur now!!</a>");
			marker.openPopup();
			marker_arr.push(marker);
		}
	}
	var lats=test[1][0];
	var lon=test[1][1];
	var marker3=L.marker([lats,lon]).addTo(mymap);
	marker3.openPopup();
	

	mymap.on("click",function(){
		var x=Math.floor(Math.random() * 3) + 1;
		if(x==1){
			document.getElementById("dino").src=imgs[0][0]
			document.getElementById("dinotext").innerHTML=imgs[0][1]
			
		}
		else if(x==2){
			document.getElementById("dino").src=imgs[1][0]
			document.getElementById("dinotext").innerHTML=imgs[1][1]
			
		}
		else{
			document.getElementById("dino").src=imgs[2][0]
			document.getElementById("dinotext").innerHTML=imgs[2][1]
			
		}
		console.log()
		$("#game").show();
	});
	$("#answer").click(function(){
		var myVar=setTimeout(myFunction,5000);

		
	});
	
</script>


<!-- 
<div class='test' data-test-value='<%-JSON.stringify(coords)%>'></div>


  <ul class="quotes">
  <% for(var i=0; i<dinos.length; i++) {%>
    <li class="quote">
      <span><%= dinos[i].name %></span>
      <span><%= dinos[i].diet %></span>
    </li>
  <% } %>
  </ul>
  
 -->
<!-- 
  <form action="/quotes" method="POST">
    <input type="text" placeholder="name" name="name">
    <input type="text" placeholder="quote" name="quote">
    <button type="submit">Submit</button>
  </form> -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- 	<script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script> -->
	<<!-- script src="map2.js"> </script> -->
<!-- 	<script type="text/javascript" src="/javascript/map2.js"></script> -->
</body>
</html>